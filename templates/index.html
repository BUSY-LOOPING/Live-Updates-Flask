<html>

<head>
  <title>
    Server Send Events
  </title>
</head>

<body>
  <h1>APP</h1>
  <div id="counter"></div>
  <script>
    var eventSource = new EventSource('/listen')

    eventSource.addEventListener('message', function(e) {
      console.log(e.data)
    }, false)

    eventSource.addEventListener('online', function(e) {
      data = JSON.parse(e.data)
      document.querySelector('#counter').innerText  = data.counter
      document.querySelector('body').style.backgroundColor = data.color
    }, true)
  </script>
</body>

</html>